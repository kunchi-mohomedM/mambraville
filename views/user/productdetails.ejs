<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Details Page</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body class="bg-gray-100">
    <!-- Header -->
    <header class="bg-black text-white shadow-sm">
        <%-include("../../views/partials/user/header")-%>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-6">
        <!-- Breadcrumb -->
        <div class="flex items-center text-sm text-gray-500 mb-6">
            <a href="/" class="hover:text-gray-700">products</a>
            <span class="mx-2">/</span>
            <a href="/products-user/" class="hover:text-gray-700">
                <%=category.categoryname%>
            </a>
            <span class="mx-2">/</span>
            <span class="text-gray-700">
                <%= product.productName %>
            </span>
        </div>

        <!-- Product Detail Section -->
        <div class="flex flex-col lg:flex-row gap-8 mb-10">
            <!-- Product Images -->
            <div class="lg:w-6/12 flex flex-col md:flex-row gap-4">
                <!-- Thumbnail Gallery -->
                <div class="md:w-1/5 order-2 md:order-1 flex md:flex-col gap-2 mt-4 md:mt-0">
                    <div class="w-full aspect-square border border-gray-200 cursor-pointer p-1 hover:border-yellow-500">
                        <img src="<%=product.productImage[1]?.url%>" alt="Thumbnail 1"
                            class="w-full h-full object-contain">
                    </div>
                    <div class="w-full aspect-square border border-gray-200 cursor-pointer p-1 hover:border-yellow-500">
                        <img src="<%=product.productImage[2]?.url%>" alt="Thumbnail 2"
                            class="w-full h-full object-contain">
                    </div>
                    <div class="w-full aspect-square border border-gray-200 cursor-pointer p-1 hover:border-yellow-500">
                        <img src="<%=product.productImage[3]?.url%>" alt="Thumbnail 3"
                            class="w-full h-full object-contain">
                    </div>
                </div>

                <!-- Main Image -->
                <div class="md:w-4/5 order-1 md:order-2 border border-gray-200 p-2">
                    <img src="<%=product.productImage[0]?.url%>" alt="<%=product.productName%>"
                        class="w-full h-full object-contain">
                </div>
            </div>

            <!-- Product Info -->
            <div class="lg:w-6/12">
                   

                <h1 class="text-2xl font-bold mb-2">
                    <%=product.productName%>
                </h1>

                <!-- Rating -->
                <div class="flex items-center mb-3">
                    <div class="flex text-yellow-400">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star-half-alt"></i>
                    </div>

                    
                    <span class="text-sm text-gray-500 ml-2">(69 Reviews)</span>

                           <% if (product.discountPercent && product.discountPercent > 0) { %>
        <div class="ml-2">
            <span class="bg-orange-600 text-white text-xs font-bold px-2 py-1 rounded-full shadow">
                <%= product.discountPercent %>% OFF
            </span>
        </div>
    <% } %>
                </div>

                <!-- Price -->
                <div class="mb-4">
                    <span class="text-2xl font-bold">₹<%=product.discountedPrice%></span>
                    <span class="text-sm text-gray-500 line-through ml-2"> ₹<%= product.originalPrice %></span>
                </div>

         

                <!-- Features -->
                <div class="mb-6">
                    <p class="text-gray-700 mb-2">
                        <%= product.description %>
                    </p>
                </div>

                <!-- Color Selection -->
                <!-- Product Actions -->
                <div class="flex items-center gap-4 mt-6">

                    <!-- Add to Cart / Go to Cart -->
                    <% if(product.inCart){ %>
                        <a href="/cart"
                            class="flex-1 bg-green-600 hover:bg-green-700 text-white text-center py-3 rounded-lg font-semibold">
                            Go to Cart
                        </a>
                        <% } else { %>
                            <a href="/add-to-cart/<%= product._id %>"
                                class="flex-1 bg-blue-600 hover:bg-blue-700 text-white text-center py-3 rounded-lg font-semibold">
                                Add to Cart
                            </a>
                            <% } %>

                                <!-- Wishlist Button -->
                                <button onclick="toggleWishlist('<%= product._id %>')" class="w-12 h-12 flex items-center justify-center rounded-lg border
        <%= product.inWishlist ? 'bg-red-100 border-red-400' : 'bg-gray-100 border-gray-300' %>">

                                    <i class="<%= product.inWishlist ? 'fas' : 'far' %> fa-heart text-red-500"></i>
                                </button>


                </div>

            </div>

            <!-- Delivery Options -->
            <div class="border border-gray-200 rounded-md mb-4">
                <div class="p-4 border-b flex items-start">
                    <div class="mr-3 text-gray-600 mt-1">
                        <i class="fas fa-truck"></i>
                    </div>
                    <div>
                        <p class="font-medium mb-1">Free Delivery</p>
                        <p class="text-sm text-gray-600">Enter your postal code for delivery availability</p>
                    </div>
                </div>
                <div class="p-4 flex items-start">
                    <div class="mr-3 text-gray-600 mt-1">
                        <i class="fas fa-undo"></i>
                    </div>
                    <div>
                        <p class="font-medium mb-1">Return Delivery</p>
                        <p class="text-sm text-gray-600">Free 30 Days Delivery Returns. <a href="#"
                                class="text-blue-600">Details</a></p>
                    </div>
                </div>
            </div>
        </div>
        </div>

        <!-- Related Items -->
        <div class="mb-10">
            <h2 class="text-xl font-bold mb-4 flex items-center">
                <i class="fas fa-mobile-alt text-yellow-500 mr-2"></i>
                Related Items
            </h2>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
                <% relatedProducts.forEach(product=>{ %>
                    <!-- Related Product 1 -->
                    <div
                        class="group bg-white rounded-2xl shadow-sm hover:shadow-xl transition-all overflow-hidden border relative">

                          <% if (product.discountPercent && product.discountPercent > 0) { %>
        <div class="absolute top-3 left-3 z-10">
            <span class="bg-orange-600 text-white text-xs font-bold px-2 py-1 rounded-full shadow">
                <%= product.discountPercent %>% OFF
            </span>
        </div>
    <% } %>


                        <div class="absolute top-3 right-3 z-10">
                            <% if (product.inCart) { %>
                                <div class="bg-white/90 p-2 rounded-full shadow-md">
                                    <i
                                        class="fa-solid fa-heart text-gray-300 opacity-60 cursor-not-allowed text-xl"></i>
                                </div>
                                <% } else { %>
                                    <a href="/wishlist/toggle/<%= product._id %>" class="wishlist-btn bg-white p-2 rounded-full shadow-md hover:shadow-lg 
                      transition-all duration-300 cursor-pointer active:scale-90 inline-flex">

                                        <i class="
                    fa-heart text-xl transition-colors duration-300 
                    <%= product.inWishlist 
                        ? 'fa-solid text-red-500' 
                        : 'fa-regular text-gray-500 hover:text-red-400' 
                    %>
                "></i>
                                    </a>
                                    <% } %>
                        </div>




                        <!-- Product Image -->
                        <div class="w-full h-44 bg-gray-50 flex items-center justify-center overflow-hidden">
                            <img src="<%= product.productImage[0]?.url %>"
                                onclick="window.location.href='/productdetails/<%= product._id %>'"
                                class="w-full h-full object-contain p-3 group-hover:scale-105 transition" />
                        </div>

                        <!-- Details -->
                        <div class="p-4">
                            <h3 class="font-semibold text-sm text-gray-800 h-10 overflow-hidden leading-tight">
                                <%= product.productName %>
                            </h3>

                            <!-- Price -->
                             <div class="flex gap-2 items-center mt-1">
            <!-- Discounted Price -->
            <p class="text-purple-700 font-bold text-lg">
                ₹<%= product.discountedPrice%>
            </p>

            <% if (product.discountPercent && product.discountPercent > 0) { %>
                <!-- Original Price -->
                <p class="text-gray-500 text-sm mt-1 line-through">
                    ₹<%= product.originalPrice %>
                </p>
            <% } %>
        </div>
                            <!-- Rating -->
                            <div class="flex items-center gap-1 mt-1">
                                <i class="fas fa-star text-yellow-400 text-xs"></i>
                                <span class="text-gray-500 text-xs">(5)</span>
                            </div>

                            <!-- Add to Cart -->
                            <button class="toggle-cart-btn mt-3 w-full text-center rounded-full py-2 font-medium text-white 
            <%= product.inCart ? 'bg-green-600' : 'bg-purple-600' %>" data-product-id="<%= product._id %>"
                                data-in-cart="<%= product.inCart %>">

                                <i class="fas fa-shopping-cart text-xs"></i>
                                <span>
                                    <%= product.inCart ? 'Go to Cart' : 'Add to Cart' %>
                                </span>
                            </button>
                        </div>
                    </div>
                    <%})%>

            </div>
        </div>

        <!-- Product Details -->
        <div class="mb-10">
            <h2 class="text-xl font-bold mb-4">Product details</h2>

            <!-- Specifications -->
            <div class="mb-8">
                <h3 class="font-medium mb-3">General specs</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-y-2">
                    <div class="flex">
                        <span class="w-1/3 text-gray-600">Model</span>
                        <span class="w-2/3 font-medium">P71B Pro</span>
                    </div>
                    <div class="flex">
                        <span class="w-1/3 text-gray-600">Connectivity</span>
                        <span class="w-2/3 font-medium">Bluetooth, WiFi</span>
                    </div>
                    <div class="flex">
                        <span class="w-1/3 text-gray-600">Compatible Devices</span>
                        <span class="w-2/3 font-medium">Mobile, Tablet</span>
                    </div>
                </div>
            </div>

            <!-- Warranty -->
            <div class="mb-8">
                <h3 class="font-medium mb-3">Warranty</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-y-2">
                    <div class="flex">
                        <span class="w-1/3 text-gray-600">Domestic Warranty</span>
                        <span class="w-2/3 font-medium">1 Year</span>
                    </div>
                    <div class="flex">
                        <span class="w-1/3 text-gray-600">Warranty Summary</span>
                        <span class="w-2/3 font-medium">1 Year Warranty from the Date of Purchase</span>
                    </div>
                    <div class="flex">
                        <span class="w-1/3 text-gray-600">Warranty Service Type</span>
                        <span class="w-2/3 font-medium">Reach Out To us at info@mammbramelasupport.com</span>
                    </div>
                    <div class="flex">
                        <span class="w-1/3 text-gray-600">Covered in Warranty</span>
                        <span class="w-2/3 font-medium">Manufacturing Defects</span>
                    </div>
                    <div class="flex">
                        <span class="w-1/3 text-gray-600">Not Covered in Warranty</span>
                        <span class="w-2/3 font-medium">Physical damages</span>
                    </div>
                </div>
            </div>

            <div class="mb-2">
                <a href="#" class="text-blue-600 text-sm hover:underline flex items-center">
                    See all product details <i class="fas fa-chevron-right ml-1 text-xs"></i>
                </a>
            </div>
        </div>

        <!-- Reviews Section -->
        <div class="mb-10">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-xl font-bold">Reviews</h2>
                <a href="#" class="text-blue-600 text-sm hover:underline flex items-center">
                    <i class="fas fa-pen-to-square mr-1"></i> Leave a review
                </a>
            </div>

            <!-- Review Summary -->
            <div class="flex flex-col md:flex-row mb-8 gap-6">
                <!-- Overall Rating -->
                <div class="md:w-1/4 flex flex-col items-center justify-center p-4 border border-gray-200 rounded-lg">
                    <div class="text-4xl font-bold mb-2">4.1</div>
                    <div class="flex text-yellow-400 mb-1">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="far fa-star"></i>
                    </div>
                    <span class="text-sm text-gray-500">65 reviews</span>
                </div>

                <!-- Rating Breakdown -->
                <div class="md:w-3/4">
                    <!-- 5 star -->
                    <div class="flex items-center mb-2">
                        <span class="w-10 text-sm text-gray-600">5 ★</span>
                        <div class="w-full mx-2 h-2 bg-gray-200 rounded-full overflow-hidden">
                            <div class="h-full bg-yellow-400" style="width: 65%"></div>
                        </div>
                        <span class="w-10 text-sm text-gray-600 text-right">33</span>
                    </div>

                    <!-- 4 star -->
                    <div class="flex items-center mb-2">
                        <span class="w-10 text-sm text-gray-600">4 ★</span>
                        <div class="w-full mx-2 h-2 bg-gray-200 rounded-full overflow-hidden">
                            <div class="h-full bg-yellow-400" style="width: 20%"></div>
                        </div>
                        <span class="w-10 text-sm text-gray-600 text-right">18</span>
                    </div>

                    <!-- 3 star -->
                    <div class="flex items-center mb-2">
                        <span class="w-10 text-sm text-gray-600">3 ★</span>
                        <div class="w-full mx-2 h-2 bg-gray-200 rounded-full overflow-hidden">
                            <div class="h-full bg-yellow-400" style="width: 10%"></div>
                        </div>
                        <span class="w-10 text-sm text-gray-600 text-right">8</span>
                    </div>

                    <!-- 2 star -->
                    <div class="flex items-center mb-2">
                        <span class="w-10 text-sm text-gray-600">2 ★</span>
                        <div class="w-full mx-2 h-2 bg-gray-200 rounded-full overflow-hidden">
                            <div class="h-full bg-yellow-400" style="width: 5%"></div>
                        </div>
                        <span class="w-10 text-sm text-gray-600 text-right">4</span>
                    </div>

                    <!-- 1 star -->
                    <div class="flex items-center">
                        <span class="w-10 text-sm text-gray-600">1 ★</span>
                        <div class="w-full mx-2 h-2 bg-gray-200 rounded-full overflow-hidden">
                            <div class="h-full bg-yellow-400" style="width: 2%"></div>
                        </div>
                        <span class="w-10 text-sm text-gray-600 text-right">2</span>
                    </div>
                </div>
            </div>

            <!-- Individual Reviews -->
            <div class="space-y-6">
                <!-- Review 1 -->
                <div class="border-b pb-6">
                    <div class="flex justify-between mb-2">
                        <div class="flex items-center">
                            <span class="font-medium mr-2">Rafael Marquez</span>
                            <span class="text-blue-500 text-xs">
                                <i class="fas fa-circle-check"></i>
                            </span>
                        </div>
                        <span class="text-sm text-gray-500">June 28, 2022</span>
                    </div>
                    <div class="flex text-yellow-400 mb-2">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="far fa-star"></i>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-2 mb-3">
                        <div class="text-sm">
                            <span class="text-gray-600">Color:</span>
                            <span class="font-medium">Blue</span>
                        </div>
                        <div class="text-sm">
                            <span class="text-gray-600">Model:</span>
                            <span class="font-medium">P71B Pro</span>
                        </div>
                    </div>
                    <p class="text-gray-700 mb-4">
                        The picture has a nice 4:3 Boost chip, which makes it lightning fast and responsive. The camera
                        system has been upgraded, and it now includes a 12-megapixel ultra-wide lens and a 12-megapixel
                        wide lens.
                    </p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-2 mb-3">
                        <div class="text-sm">
                            <span class="font-medium">Pros:</span>
                            <span>Premium design, and it comes with a high price tag.</span>
                        </div>
                        <div class="text-sm">
                            <span class="font-medium">Cons:</span>
                            <span>Does not have a headphone jack.</span>
                        </div>
                    </div>
                    <div class="flex items-center mt-3 space-x-4">
                        <button class="text-sm text-gray-500 hover:text-blue-600 flex items-center">
                            <i class="far fa-thumbs-up mr-1"></i> 0
                        </button>
                        <button class="text-sm text-gray-500 hover:text-blue-600 flex items-center">
                            <i class="far fa-thumbs-down mr-1"></i> 0
                        </button>
                        <button class="text-sm text-blue-600 hover:underline">
                            Reply
                        </button>
                    </div>
                </div>

                <!-- Review 2 -->
                <div class="border-b pb-6">
                    <div class="flex justify-between mb-2">
                        <div class="flex items-center">
                            <span class="font-medium mr-2">Daniel Adams</span>
                        </div>
                        <span class="text-sm text-gray-500">May 9, 2023</span>
                    </div>
                    <div class="flex text-yellow-400 mb-2">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="far fa-star"></i>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-2 mb-3">
                        <div class="text-sm">
                            <span class="text-gray-600">Color:</span>
                            <span class="font-medium">Black</span>
                        </div>
                        <div class="text-sm">
                            <span class="text-gray-600">Model:</span>
                            <span class="font-medium">P71B Pro</span>
                        </div>
                    </div>
                    <p class="text-gray-700 mb-4">
                        The picture has a nice 4:3 Boost chip, which makes it lightning fast and responsive. The camera
                        system has been upgraded, and it now includes a 12-megapixel ultra-wide lens and a 12-megapixel
                        wide lens. The colors are excellent, and it can handle lots of accent light a whole day of heavy
                        use.
                    </p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-2 mb-3">
                        <div class="text-sm">
                            <span class="font-medium">Pros:</span>
                            <span>Competitive design, snapdragon Inside!, responsive.</span>
                        </div>
                        <div class="text-sm">
                            <span class="font-medium">Cons:</span>
                            <span>Dust/smudge pattern, poor battery.</span>
                        </div>
                    </div>
                    <div class="flex items-center mt-3 space-x-4">
                        <button class="text-sm text-gray-500 hover:text-blue-600 flex items-center">
                            <i class="far fa-thumbs-up mr-1"></i> 0
                        </button>
                        <button class="text-sm text-gray-500 hover:text-blue-600 flex items-center">
                            <i class="far fa-thumbs-down mr-1"></i> 0
                        </button>
                        <button class="text-sm text-blue-600 hover:underline">
                            Reply
                        </button>
                    </div>
                </div>

                <!-- See all reviews -->
                <div class="text-center">
                    <a href="#" class="text-blue-600 hover:underline font-medium inline-flex items-center">
                        Show all reviews <i class="fas fa-chevron-right ml-1 text-xs"></i>
                    </a>
                </div>
            </div>
        </div>
    </main>


</body>
 <footer class="bg-indigo-900 text-white mt-12">
        <%-include("../../views/partials/user/footer")-%>
    </footer>
    <script>

        document.addEventListener('DOMContentLoaded', function () {

            const mainImageContainer = document.querySelector('.order-1.md\\:order-2');


            const mainImage = mainImageContainer.querySelector('img');

            if (mainImage && mainImageContainer) {

                mainImageContainer.style.position = 'relative';
                mainImageContainer.style.overflow = 'hidden';


                let originalWidth = mainImage.offsetWidth;
                let originalHeight = mainImage.offsetHeight;


                mainImageContainer.addEventListener('mouseenter', function () {

                    mainImage.style.transition = 'transform 0.3s ease';
                    mainImage.style.transformOrigin = 'center';
                    mainImage.style.transform = 'scale(1.5)';
                    mainImage.style.cursor = 'zoom-in';
                });


                mainImageContainer.addEventListener('mousemove', function (e) {

                    const rect = mainImageContainer.getBoundingClientRect();


                    const x = (e.clientX - rect.left) / rect.width;
                    const y = (e.clientY - rect.top) / rect.height;


                    mainImage.style.transformOrigin = `${x * 100}% ${y * 100}%`;
                });


                mainImageContainer.addEventListener('mouseleave', function () {
                    mainImage.style.transform = 'scale(1)';
                });


                const thumbnails = document.querySelectorAll('.md\\:w-1\\/5 .aspect-square');

                thumbnails.forEach(thumbnail => {
                    thumbnail.addEventListener('click', function () {
                        const thumbnailImg = this.querySelector('img');
                        const thumbnailSrc = thumbnailImg.src;


                        mainImage.src = thumbnailSrc;
                    });
                });
            }
        });
    </script>

</html>